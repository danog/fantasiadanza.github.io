/*
 *  Interdimensional - v0.0.2
 *  Spatial scrolling for your web pages.
 *  http://vodkabears.github.io/interdimensional/
 *
 *  Made by Ilya Makarov <dfrost.00@gmail.com>
 *  Under MIT License
 */

!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.Interdimensional=b()}(this,function(){"use strict";function a(a,b){if(!("DeviceOrientationEvent"in window))return b();var c=setTimeout(function(){window.removeEventListener("deviceorientation",d,!1),b()},2e3),d=function(e){clearTimeout(c),window.removeEventListener("deviceorientation",d,!1),p&&(null!=e.alpha||null!=e.beta||null!=e.gamma?a():b())};window.addEventListener("deviceorientation",d,!1)}function b(a,b){var c=b-a,d=Math.abs(c),e=0===c?0:c/d;return d>k.insensitivity?k.PPD*(c-e*k.insensitivity):0}function c(a){var b;a&&(a="interdimensional:"+a,window.Event&&"function"==typeof window.Event?b=new Event(a):(b=document.createEvent("Event"),b.initEvent(a,!0,!0)),document.dispatchEvent(b))}function d(){window.scrollBy(r,s),q&&m(d)}function e(){Interdimensional.toggle()}function f(a){q&&null!=h&&null!=i&&null!=j?window.innerHeight>window.innerWidth?(r=b(j,a.gamma),s=b(i,Math.abs(a.gamma)>90&&Math.abs(j)<90?180-a.beta:a.beta)):(r=b(h,a.alpha),s=b(Math.abs(j),Math.abs(a.gamma))):(h=a.alpha,i=a.beta,j=a.gamma)}function g(){Interdimensional.kick()}var h,i,j,k,l,m=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,1e3/60)},n={PPD:.8,insensitivity:5,useControl:!0,control:null},o=!1,p=!1,q=!1,r=0,s=0;return{isCharged:function(){return o},isOn:function(){return q},charge:function(b){o||p||(p=!0,a(function(){o=!0,p=!1,k={};for(var a in n)n.hasOwnProperty(a)&&(k[a]=b&&"undefined"!=typeof b[a]?b[a]:n[a]);k.control?l=k.control:(l=document.createElement("div"),l.className="interdimensional-control"),!k.control&&k.useControl&&document.body.appendChild(l),l.addEventListener("touchstart",e,!1),window.addEventListener("deviceorientation",f,!1),window.addEventListener("orientationchange",g,!1),c("charge")},function(){p=!1,c("fail")}))},jump:function(){o&&(q=!0,l.classList.add("interdimensional-control-is-active"),d(),c("jump"))},kick:function(){o&&(q=!1,r=0,s=0,l.classList.remove("interdimensional-control-is-active"),c("kick"))},toggle:function(){q?Interdimensional.kick():Interdimensional.jump()},discharge:function(){o&&(Interdimensional.kick(),o=!1,!k.control&&k.useControl&&document.body.removeChild(l),l.removeEventListener("touchstart",e,!1),window.removeEventListener("deviceorientation",f,!1),window.removeEventListener("orientationchange",g,!1),c("discharge"))}}});